龙骨炮阵防御战 - 完整游戏规则与任务需求总结
一、游戏基本设定
1. 核心实体
   龙：入侵者，由龙骨组成

龙骨：一维数组 [0,0,0,1,1,1,2,2,2,3,3,3,2,2,0]

类型：0/1/2/3四种类型

生命值：固定为1（一击必杀）

炮阵：防御系统，3列×n行二维数组

炮台：炮阵中的元素

类型：0/1/2/3（必须与龙骨类型相同才能攻击）

攻击力：固定为1

攻击次数：每个炮台有有限使用次数

2. 战场配置
   text
   炮阵布局：3列 × n行
   信息可见性：
- 前3行：完全可见，固定排布
- 第4行及以后：动态生成，玩家不可预知
  行动方式：只能从第0行拖取炮台
  补给机制：炮台被使用后，该列所有炮台上移一行
  二、游戏核心机制
1. 攻击流程
   text
   回合开始 → 选择第0行任意炮台 → 与龙骨序列顺序匹配
2. 匹配规则
   顺序检查：从龙骨序列第一个开始依次检查

延迟机制：类型不匹配时等待1秒后检查下一个

完全检查：检查完所有龙骨才判定失配

3. 攻击结果处理
   A. 匹配成功
   炮台攻击对应龙骨

龙骨生命值-1（生命值=0则被摧毁）

炮台攻击次数-1

该列所有炮台上移一行

底部生成新炮台（按动态规则）

B. 完全失配（遗弃）
与所有龙骨类型都不匹配

该炮台成为遗弃值

遗弃值计数+1

该列仍上移一行（炮台被废弃）

4. 资源限制
   遗弃上限：最大5个遗弃炮台

攻击次数：每个炮台有限使用次数

时间消耗：每次检查消耗1秒

三、胜负判定
胜利条件
所有龙骨被摧毁（一维数组清空）

遗弃值数量 < 上限（默认5）

失败条件
遗弃值达到上限（≥5）

炮阵耗尽但仍有龙骨剩余（隐含失败）

四、任务需求：难度自适应炮阵生成系统
输入参数
text
1. 龙骨序列：[0,0,0,1,1,1,2,2,2,3,3,3,2,2,0]
2. 难度系数：0.0（最简单）到1.0（最难）
   生成目标
   设计算法根据难度系数生成：

初始前3行炮台排布

后续炮台动态生成规则

游戏参数配置

五、难度实现方案
1. 难度维度控制
   text
   总难度 = 攻击次数稀缺性(40%) + 类型匹配难度(40%) + 动态调整恶意度(20%)
2. 具体参数映射
   难度等级	攻击次数	类型匹配率	初始排布	动态策略	遗弃容限	时间压力
   极简(0-0.2)	3-4次	>95%	完美对齐	补缺型	6	无
   简单(0.2-0.4)	2-3次	85-95%	良好对齐	协助型	5	轻微
   标准(0.4-0.6)	2次	70-85%	基本对齐	中性型	5	中等
   困难(0.6-0.8)	1-2次	50-70%	轻度混乱	干扰型	4	较强
   极难(0.8-1.0)	1次	30-50%	高度混乱	对抗型	3	极强
3. 初始排布策略
   简单：每列专业化，与龙骨前段对齐

中等：混合但有规律（如循环序列）

困难：随机混乱，故意制造类型缺失

4. 动态生成策略
   补缺型：检测玩家需求，主动提供所需类型

协助型：在玩家连续失败时提供帮助

中性型：完全随机，公平生成

干扰型：适度增加不匹配炮台

对抗型：故意生成玩家最不需要的类型

六、关键设计原则
1. 保证可解性
   无论难度如何，必须存在至少一条成功路径

通过算法验证攻击资源总量足够

2. 动态平衡
   前3行：提供确定性，允许短期规划

后续行：动态生成，创造不确定性

结合短期策略与长期应变

3. 渐进学习
   难度提升伴随新机制引入

玩家可以学习动态模式

4. 失败可分析
   玩家能明确失败原因（遗弃过多、资源不足等）

提供改进方向

七、评估标准
难度评分公式
text
最终难度评分 = 遗弃值比例 × 80% + 时间效率 × 20%
测试目标成功率
难度0.2：新手玩家95%成功率

难度0.5：熟练玩家50%成功率

难度0.8：高手玩家20%成功率

难度1.0：顶级玩家5%成功率

八、算法需求总结
需要开发一个算法，能够：

接受输入：龙骨序列 + 难度系数(0-1)

生成炮阵：

初始3×3固定排布

后续动态生成规则

游戏参数配置

保证特性：

可解性（存在成功路径）

难度对应性（系数与实际挑战匹配）

动态适应性（根据战况调整）

输出格式：结构化数据，包含所有游戏参数

九、游戏本质
这是一个有限资源的时间压力匹配游戏，玩家需要在：

类型匹配：精确匹配炮台与龙骨类型

资源管理：合理分配攻击次数

动态应变：适应不可预知的后续补给

时间压力：在检查和等待中做出快速决策

核心挑战：在有限的5次失配机会内，高效利用有限攻击次数，在动态变化的炮阵中精准匹配并摧毁所有龙骨。